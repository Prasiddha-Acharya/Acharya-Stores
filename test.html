<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>


    <style>
        #imagePreview {
            max-width: 100%;
            max-height: 300px;
            margin-top: 20px;
        }
    </style>

</head>
<body>
<!-- This is the modified input element for selecting an image -->
<input class="delivery" type="file" id="paymentScreenshot" name="paymentScreenshot">
<!-- This is the modified image element with an empty src and alt attribute -->
<img src="" alt="">
<script>
    // This line declares a variable called "url" and assigns it a value of "Api_Endpoint_Url"
    let url = "https://script.google.com/macros/s/AKfycbxDfntyBMSa9DJkenq8gufI-5nvBXe8ep5G5wUAiJ-H7c4At4N8hHL0pvEIDseheMcI/exec";
    // This line declares a variable called "file" and assigns it the value of the modified input element on the page
    let file = document.getElementById("paymentScreenshot");
    // This line declares a variable called "img" and assigns it the value of the modified image element on the page
    let img = document.querySelector("img");
    file.addEventListener('change',()=>{
        let fr = new FileReader();
        fr.addEventListener('loadend',()=>{
            let res = fr.result;
            img.src=res;
            let spt = res.split("base64,")[1];
            let obj = {
                base64:spt,
                type:file.files[0].type,
                name:file.files[0].name
            }
            fetch(url,{
                method:"POST",
                body:JSON.stringify(obj)
            })
            .then(r=>r.text())
            .then(data=>console.log(data))
        })
        fr.readAsDataURL(file.files[0])
    })
</script>
</body>
</html>
